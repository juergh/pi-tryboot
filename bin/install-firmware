#!/bin/bash -eu
#
# Install tryboot firmware files
#

dest_dir=${1:-}

lib_dir="${dest_dir}"/usr/lib/rpi-tryboot

# Install firmware files
mkdir -p "${lib_dir}"/tryboot
cp buildd/initrd.img "${lib_dir}"/tryboot/
cp -r firmware/boot/firmware/* "${lib_dir}"/tryboot/
find "${lib_dir}"/tryboot -type f -exec chmod 644 {} +

# Install hook scripts
mkdir -p "${lib_dir}"/hooks/
cp hooks/* "${lib_dir}"/hooks/
